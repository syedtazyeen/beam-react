import{r,p as v,a as N,e as C,j as s}from"./index-BO0DeBpE.js";import"./CircularLoading-2PuJ8enf.js";import{B as m}from"./ToggleButton-BojE4Rkp.js";import{I as R}from"./Textarea-BY6rh0iC.js";import{u as E}from"./use-router-DVooktSv.js";import{A as P,a as k}from"./app.config-BPS68LOn.js";import{C as S}from"./Card-rsBc4x1u.js";import"./styled-components.browser.esm-C1LfnyJe.js";const A=()=>{const[a,g]=r.useState({email:"",password:"",username:"",dob:""}),[t,l]=r.useState(null),[p,f]=r.useState(!0),[x,{isLoading:h}]=v(),{token:c}=N(e=>e.auth),{push:i}=E(),{redirectPath:d}=C();r.useEffect(()=>{a&&f(!u(a))},[a]);function u(e){const{email:o,password:j,username:b}=e,n={};return o||(n.email="Email is required"),j||(n.password="Password is required"),b||(n.username="Username is required"),Object.keys(n).length===0}r.useEffect(()=>{c&&i(d||"/home")},[c,i,d]);const w=(e,o)=>{g({...a,[e]:o})},y=r.useCallback(async()=>{if(u(a))try{const e=await x(a).unwrap();console.log("Registration successful:",e),l({type:"success",message:"Successfully registered"}),i("/login")}catch(e){console.error("Registration failed:",e),l({type:"error",message:(e==null?void 0:e.data.errorMessage)||"Failed to register"})}},[a]);return s.jsxs(s.Fragment,{children:[s.jsx(P,{message:t==null?void 0:t.message,type:t==null?void 0:t.type,show:!!t,autoClose:!0,onClose:()=>l(null)}),s.jsx("div",{className:"max-w-[450px] w-full",children:s.jsx(S,{children:s.jsxs("div",{className:"m-2 flex flex-col gap-4",children:[s.jsxs("div",{className:"flex flex-col justify-center my-4",children:[s.jsx("img",{className:"w-10",src:"./logo.svg"}),s.jsxs("p",{className:"text-2xl font-semibold font-family-style1",children:["Join ",k," now!"]})]}),q.map(e=>s.jsxs("div",{className:"w-full my-1",children:[s.jsx("p",{className:"opacity-70 tracking-tight font-semibold text-sm mb-1",children:e.label}),s.jsx(R,{type:e.id==="password"?"password":"text",value:a[e.id],onChange:o=>w(e.id,o.target.value)})]},e.id)),s.jsx("p",{className:"font-medium opacity-50 text-xs cursor-pointer",children:"By creating account, you are agreeing to Terms & Conditions and are acknowledging our Privacy Notice applies."}),s.jsx(m,{loading:h,disabled:p,onClick:y,loadingPlaceHolder:"Creating account..",variant:"filled",children:"Create account"}),s.jsx(m,{onClick:()=>i("/login"),children:"Already have an account?"})]})})})]})},q=[{id:"username",label:"Username"},{id:"email",label:"Email"},{id:"password",label:"Password"}],J=()=>s.jsxs("div",{className:"fixed z-[998] flex justify-center w-full h-screen overflow-y-auto",children:[s.jsx("img",{className:"fixed w-[100vw] z-[-1] opacity-30",src:"./bg/login.svg"}),s.jsx(A,{})]});export{J as default};
